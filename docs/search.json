[
  {
    "objectID": "ST558_HW2.html",
    "href": "ST558_HW2.html",
    "title": "ST558 HW2 - Lee Worthington",
    "section": "",
    "text": "Task 2\n\nQ1 - create dataframe using prior data\n\n# load data to df\nbp_data <- data.frame(patient = names, \n                      pre_bp = pre_treatment, \n                      post_bp = post_treatment, \n                      diff_bp = treatment_delta)\n\n# reassign row names\nrownames(bp_data) <- NULL\n\n\n\nQ2 - return only negative diff_bp (dont overwrite, just print)\n\n# filter rows, select all columns\nbp_data[(bp_data$diff_bp < 0), c('patient', 'pre_bp', 'post_bp', 'diff_bp')]\n\n      patient pre_bp post_bp diff_bp\n9   Subject_9    114     119      -5\n13 Subject_13    128     130      -2\n17 Subject_17    120     124      -4\n\n\n\n\nQ3 - add binary flag on bp\n\n# initiate new field and populate it (see control flow logical notes)\nbp_data$post_bp_less_120 <- bp_data$post_bp < 120\n\n\n\nQ4 - print dataframe\n\nknitr::kable(bp_data, caption = \"Blood Pressure Data\")\n\n\nBlood Pressure Data\n\n\npatient\npre_bp\npost_bp\ndiff_bp\npost_bp_less_120\n\n\n\n\nSubject_1\n130\n114\n16\nTRUE\n\n\nSubject_2\n128\n98\n30\nTRUE\n\n\nSubject_3\n116\n113\n3\nTRUE\n\n\nSubject_4\n124\n99\n25\nTRUE\n\n\nSubject_5\n133\n107\n26\nTRUE\n\n\nSubject_6\n134\n116\n18\nTRUE\n\n\nSubject_7\n118\n113\n5\nTRUE\n\n\nSubject_8\n126\n111\n15\nTRUE\n\n\nSubject_9\n114\n119\n-5\nTRUE\n\n\nSubject_10\n127\n117\n10\nTRUE\n\n\nSubject_11\n141\n101\n40\nTRUE\n\n\nSubject_12\n138\n119\n19\nTRUE\n\n\nSubject_13\n128\n130\n-2\nFALSE\n\n\nSubject_14\n140\n122\n18\nFALSE\n\n\nSubject_15\n137\n106\n31\nTRUE\n\n\nSubject_16\n131\n106\n25\nTRUE\n\n\nSubject_17\n120\n124\n-4\nFALSE\n\n\nSubject_18\n128\n102\n26\nTRUE\n\n\nSubject_19\n139\n117\n22\nTRUE\n\n\nSubject_20\n135\n113\n22\nTRUE\n\n\n\n\n\n\n\n\nTask 3\n\nQ1 - create data frame\n\n# create data\npre_treatment <- c(138, 135, 147, 117, 152, 134, 114, 121, 131, 130)\npost_treatment <- c(105, 136, 123, 130, 134, 143, 135, 139, 120, 124)\n\n# assign names\nnames <- paste(\"Subject\", 1:10, sep = \"_\")\nnames(pre_treatment) <- names\nnames(post_treatment) <- names\n\n# calculate delta and those with an improvement\ntreatment_delta <- pre_treatment - post_treatment\n\n# load data to df\nbp_data_placebo <- data.frame(patient = names, \n                              pre_bp = pre_treatment, \n                              post_bp = post_treatment, \n                              diff_bp = treatment_delta)\n\n# return only negative diff_bp\n#bp_data_placebo <- bp_data_placebo[(bp_data_placebo$diff_bp < 0), c('patient', 'pre_bp', 'post_bp', 'diff_bp')]\n\n# add a flag for those with < 120 post bp\nbp_data_placebo$post_bp_less_120 <- bp_data_placebo$post_bp < 120\n\n\n\nQ2 - create list\n\ntrial_list <- list(treatment = bp_data, placebo = bp_data_placebo)\n\n\n\nQ3 - pull 1st list element using different syntaxes\n\n#trial_list[1] # does not techincally access the element\ntrial_list[[1]]\n\n      patient pre_bp post_bp diff_bp post_bp_less_120\n1   Subject_1    130     114      16             TRUE\n2   Subject_2    128      98      30             TRUE\n3   Subject_3    116     113       3             TRUE\n4   Subject_4    124      99      25             TRUE\n5   Subject_5    133     107      26             TRUE\n6   Subject_6    134     116      18             TRUE\n7   Subject_7    118     113       5             TRUE\n8   Subject_8    126     111      15             TRUE\n9   Subject_9    114     119      -5             TRUE\n10 Subject_10    127     117      10             TRUE\n11 Subject_11    141     101      40             TRUE\n12 Subject_12    138     119      19             TRUE\n13 Subject_13    128     130      -2            FALSE\n14 Subject_14    140     122      18            FALSE\n15 Subject_15    137     106      31             TRUE\n16 Subject_16    131     106      25             TRUE\n17 Subject_17    120     124      -4            FALSE\n18 Subject_18    128     102      26             TRUE\n19 Subject_19    139     117      22             TRUE\n20 Subject_20    135     113      22             TRUE\n\ntrial_list[['treatment']]\n\n      patient pre_bp post_bp diff_bp post_bp_less_120\n1   Subject_1    130     114      16             TRUE\n2   Subject_2    128      98      30             TRUE\n3   Subject_3    116     113       3             TRUE\n4   Subject_4    124      99      25             TRUE\n5   Subject_5    133     107      26             TRUE\n6   Subject_6    134     116      18             TRUE\n7   Subject_7    118     113       5             TRUE\n8   Subject_8    126     111      15             TRUE\n9   Subject_9    114     119      -5             TRUE\n10 Subject_10    127     117      10             TRUE\n11 Subject_11    141     101      40             TRUE\n12 Subject_12    138     119      19             TRUE\n13 Subject_13    128     130      -2            FALSE\n14 Subject_14    140     122      18            FALSE\n15 Subject_15    137     106      31             TRUE\n16 Subject_16    131     106      25             TRUE\n17 Subject_17    120     124      -4            FALSE\n18 Subject_18    128     102      26             TRUE\n19 Subject_19    139     117      22             TRUE\n20 Subject_20    135     113      22             TRUE\n\ntrial_list$treatment\n\n      patient pre_bp post_bp diff_bp post_bp_less_120\n1   Subject_1    130     114      16             TRUE\n2   Subject_2    128      98      30             TRUE\n3   Subject_3    116     113       3             TRUE\n4   Subject_4    124      99      25             TRUE\n5   Subject_5    133     107      26             TRUE\n6   Subject_6    134     116      18             TRUE\n7   Subject_7    118     113       5             TRUE\n8   Subject_8    126     111      15             TRUE\n9   Subject_9    114     119      -5             TRUE\n10 Subject_10    127     117      10             TRUE\n11 Subject_11    141     101      40             TRUE\n12 Subject_12    138     119      19             TRUE\n13 Subject_13    128     130      -2            FALSE\n14 Subject_14    140     122      18            FALSE\n15 Subject_15    137     106      31             TRUE\n16 Subject_16    131     106      25             TRUE\n17 Subject_17    120     124      -4            FALSE\n18 Subject_18    128     102      26             TRUE\n19 Subject_19    139     117      22             TRUE\n20 Subject_20    135     113      22             TRUE\n\n\n\n\nQ4 - pull placebo pre_bp columns from list\n\ntrial_list$placebo$pre_bp\n\n [1] 138 135 147 117 152 134 114 121 131 130\n\n#trial_list[['placebo']][['pre_bp']] # this also works, but more code\n\n\n\n\nTask 4\n\nQ1 - add empty column to list dfs\n\ntrial_list$treatment$status <- character(20)\ntrial_list$placebo$status <- character(10)\n\n\n\nQ2 - create for loop for non-placebo post treatment bp\n\n# create loop to classify bp\nfor (i in 1:20){\n  if(trial_list$treatment$post_bp[i] > 130){\n    trial_list$treatment$status[i] <- 'High'\n  } \n  \n  else if (trial_list$treatment$post_bp[i] > 120){\n    trial_list$treatment$status[i] <- 'Borderline'\n  } \n  \n  else if (trial_list$treatment$post_bp[i] > 0){\n    trial_list$treatment$status[i] <- 'Optimal'\n  } \n  \n  else{\n    trial_list$treatment$status[i] <- 'Error'\n  }\n}\n\n# print results\ntrial_list$treatment\n\n      patient pre_bp post_bp diff_bp post_bp_less_120     status\n1   Subject_1    130     114      16             TRUE    Optimal\n2   Subject_2    128      98      30             TRUE    Optimal\n3   Subject_3    116     113       3             TRUE    Optimal\n4   Subject_4    124      99      25             TRUE    Optimal\n5   Subject_5    133     107      26             TRUE    Optimal\n6   Subject_6    134     116      18             TRUE    Optimal\n7   Subject_7    118     113       5             TRUE    Optimal\n8   Subject_8    126     111      15             TRUE    Optimal\n9   Subject_9    114     119      -5             TRUE    Optimal\n10 Subject_10    127     117      10             TRUE    Optimal\n11 Subject_11    141     101      40             TRUE    Optimal\n12 Subject_12    138     119      19             TRUE    Optimal\n13 Subject_13    128     130      -2            FALSE Borderline\n14 Subject_14    140     122      18            FALSE Borderline\n15 Subject_15    137     106      31             TRUE    Optimal\n16 Subject_16    131     106      25             TRUE    Optimal\n17 Subject_17    120     124      -4            FALSE Borderline\n18 Subject_18    128     102      26             TRUE    Optimal\n19 Subject_19    139     117      22             TRUE    Optimal\n20 Subject_20    135     113      22             TRUE    Optimal\n\n\n\n\nQ3 - create for loop for placebo post treatment bp\n\n# create loop to classify bp\nfor (i in 1:10){\n  if(trial_list$placebo$post_bp[i] > 130){\n    trial_list$placebo$status[i] <- 'High'\n  } \n  \n  else if (trial_list$placebo$post_bp[i] > 120){\n    trial_list$placebo$status[i] <- 'Borderline'\n  } \n  \n  else if (trial_list$placebo$post_bp[i] > 0){\n    trial_list$placebo$status[i] <- 'Optimal'\n  } \n  \n  else{\n    trial_list$placebo$status[i] <- 'Error'\n  }\n}\n\n# print results\ntrial_list$placebo\n\n              patient pre_bp post_bp diff_bp post_bp_less_120     status\nSubject_1   Subject_1    138     105      33             TRUE    Optimal\nSubject_2   Subject_2    135     136      -1            FALSE       High\nSubject_3   Subject_3    147     123      24            FALSE Borderline\nSubject_4   Subject_4    117     130     -13            FALSE Borderline\nSubject_5   Subject_5    152     134      18            FALSE       High\nSubject_6   Subject_6    134     143      -9            FALSE       High\nSubject_7   Subject_7    114     135     -21            FALSE       High\nSubject_8   Subject_8    121     139     -18            FALSE       High\nSubject_9   Subject_9    131     120      11            FALSE    Optimal\nSubject_10 Subject_10    130     124       6            FALSE Borderline\n\n\n\n\n\nTask 5\n\nCreate summary statistic function\n\n# create function\nsummaryStatistics <- function(input_list, stat = 'mean'){\n  \n  # get input statistic\n  func <- get(stat)\n  \n  # calculate the statistic on specified columns\n  pre_treatment_bp <- func(input_list$treatment$pre_bp)\n  post_treatment_bp <- func(input_list$treatment$post_bp)\n  diff_treatment_bp <- func(input_list$treatment$diff_bp)\n  \n  pre_placebo_bp <- func(input_list$placebo$pre_bp)\n  post_placebo_bp <- func(input_list$placebo$post_bp)\n  diff_placebo_bp <- func(input_list$placebo$diff_bp)\n  \n  # create vector with the calculated statistics\n  stat_values <- c(pre_treatment_bp, post_treatment_bp, diff_treatment_bp,\n                   pre_placebo_bp, post_placebo_bp, diff_placebo_bp)\n  \n  # create vector of names\n  stat_names <- c(\n    paste('pre_treatment_bp', stat, sep = '_'),\n    paste('post_treatment_bp', stat, sep = '_'),\n    paste('diff_treatment_bp', stat, sep = '_'),\n    paste('pre_placebo_bp', stat, sep = '_'),\n    paste('post_placebo_bp', stat, sep = '_'),\n    paste('diff_placebo_bp', stat, sep = '_')\n  )\n  \n  # combine the stats and names\n  names(stat_values) <- stat_names\n  \n  # return the values\n  return(stat_values)\n}\n\n\n\nPrint function results\n\nsummaryStatistics(input_list = trial_list) # default\n\n pre_treatment_bp_mean post_treatment_bp_mean diff_treatment_bp_mean \n                129.35                 112.35                  17.00 \n   pre_placebo_bp_mean   post_placebo_bp_mean   diff_placebo_bp_mean \n                131.90                 128.90                   3.00 \n\nsummaryStatistics(input_list = trial_list, stat = 'mean') # default check\n\n pre_treatment_bp_mean post_treatment_bp_mean diff_treatment_bp_mean \n                129.35                 112.35                  17.00 \n   pre_placebo_bp_mean   post_placebo_bp_mean   diff_placebo_bp_mean \n                131.90                 128.90                   3.00 \n\nsummaryStatistics(input_list = trial_list, stat = 'var') \n\n pre_treatment_bp_var post_treatment_bp_var diff_treatment_bp_var \n             64.55526              74.76579             153.68421 \n   pre_placebo_bp_var   post_placebo_bp_var   diff_placebo_bp_var \n            149.87778             124.98889             341.33333 \n\nsummaryStatistics(input_list = trial_list, stat = 'sd') \n\n pre_treatment_bp_sd post_treatment_bp_sd diff_treatment_bp_sd \n            8.034629             8.646721            12.396944 \n   pre_placebo_bp_sd   post_placebo_bp_sd   diff_placebo_bp_sd \n           12.242458            11.179843            18.475209 \n\nsummaryStatistics(input_list = trial_list, stat = 'min')\n\n pre_treatment_bp_min post_treatment_bp_min diff_treatment_bp_min \n                  114                    98                    -5 \n   pre_placebo_bp_min   post_placebo_bp_min   diff_placebo_bp_min \n                  114                   105                   -21 \n\nsummaryStatistics(input_list = trial_list, stat = 'max') \n\n pre_treatment_bp_max post_treatment_bp_max diff_treatment_bp_max \n                  141                   130                    40 \n   pre_placebo_bp_max   post_placebo_bp_max   diff_placebo_bp_max \n                  152                   143                    33"
  }
]